<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camera Detection</title>
</head>
<body>
<h1>Camera Detection</h1>
<button onclick="startCamera()">Start Camera</button>
<p id="cameraPermissionStatus"></p>
<p id="cameraDetails"></p>

<script>
async function startCamera() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: true });
    document.getElementById('cameraPermissionStatus').textContent = 'Camera permission granted!';
    displayCameraDetails(stream);
  } catch (error) {
    console.error('Error accessing camera:', error);
    document.getElementById('cameraPermissionStatus').textContent = 'Error accessing camera. Please grant permission.';
  }
}

function displayCameraDetails(stream) {
  const videoTracks = stream.getVideoTracks();
  if (videoTracks.length > 0) {
    const track = videoTracks[0];
    const capabilities = track.getCapabilities();
    const isRealCamera = detectRealCamera(capabilities);
    const label = track.label || 'Unknown Camera';

    const detailsHTML = `
      <strong>Camera Name:</strong> ${label}<br>
      <strong>Camera Type:</strong> ${isRealCamera ? 'Real Camera' : 'Virtual Camera'}<br>
      <strong>Capabilities:</strong><br>
      <pre>${JSON.stringify(capabilities, null, 2)}</pre>
      <hr>
    `;
    document.getElementById('cameraDetails').innerHTML = detailsHTML;
  } else {
    document.getElementById('cameraDetails').textContent = 'No camera found.';
  }
}

function detectRealCamera(capabilities) {
  // Check for the presence of specific capabilities
  return (
    'brightness' in capabilities &&
    'colorTemperature' in capabilities &&
    'contrast' in capabilities &&
    'frameRate' in capabilities
  );
}
</script>
</body>
</html>
